{"openapi":"3.1.0","info":{"title":"OpenAgent API","description":"REST API for OpenAgent - AI-powered terminal assistant","version":"0.1.3"},"paths":{"/health":{"get":{"summary":"Health Check","description":"Health check endpoint (deprecated; use /healthz).","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/healthz":{"get":{"summary":"Healthz","operationId":"healthz_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/readyz":{"get":{"summary":"Readyz","operationId":"readyz_readyz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/metrics":{"get":{"summary":"Metrics Endpoint","operationId":"metrics_endpoint_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/auth/login":{"post":{"summary":"Login","description":"Authenticate user and return access token.","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chat":{"post":{"summary":"Chat","description":"Process a chat message with the agent.","operationId":"chat_chat_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/chat/stream":{"post":{"summary":"Chat Stream","description":"Stream a chat response using Server-Sent Events (SSE).\nAttempts real incremental streaming if supported by the model, otherwise\nfalls back to chunking the final response.","operationId":"chat_stream_chat_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/code/generate":{"post":{"summary":"Generate Code","description":"Generate code based on description.","operationId":"generate_code_code_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/code/analyze":{"post":{"summary":"Analyze Code","description":"Analyze code and provide insights.","operationId":"analyze_code_code_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/system/info":{"get":{"summary":"Get System Info","description":"Get system information.","operationId":"get_system_info_system_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemInfoResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/agents":{"get":{"summary":"List Agents","description":"List all available agents.","operationId":"list_agents_agents_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AgentStatus"},"type":"array","title":"Response List Agents Agents Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/agents/{agent_name}/status":{"get":{"summary":"Get Agent Status","description":"Get status of a specific agent.","operationId":"get_agent_status_agents__agent_name__status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_name","in":"path","required":true,"schema":{"type":"string","title":"Agent Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/agents/{agent_name}/reset":{"post":{"summary":"Reset Agent","description":"Reset an agent's conversation history.","operationId":"reset_agent_agents__agent_name__reset_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_name","in":"path","required":true,"schema":{"type":"string","title":"Agent Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/models":{"get":{"summary":"List Models","description":"List all available models.","operationId":"list_models_models_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ModelInfo"},"type":"array","title":"Response List Models Models Get"}}}}},"security":[{"HTTPBearer":[]}]}}},"components":{"schemas":{"AgentStatus":{"properties":{"name":{"type":"string","title":"Name","description":"Agent name"},"description":{"type":"string","title":"Description","description":"Agent description"},"model":{"type":"string","title":"Model","description":"LLM model being used"},"is_processing":{"type":"boolean","title":"Is Processing","description":"Whether the agent is currently processing"},"tools":{"items":{"type":"string"},"type":"array","title":"Tools","description":"List of available tools"},"message_count":{"type":"integer","title":"Message Count","description":"Number of messages in conversation history"},"uptime":{"type":"number","title":"Uptime","description":"Agent uptime in seconds","default":0.0},"memory_usage":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Memory Usage","description":"Memory usage in MB"}},"type":"object","required":["name","description","model","is_processing","tools","message_count"],"title":"AgentStatus","description":"Agent status model."},"AnalysisRequest":{"properties":{"agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent","description":"Name of the agent to use (defaults to 'default')"},"code":{"type":"string","title":"Code","description":"Code to analyze"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"focus":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Focus","description":"Specific aspects to focus on (e.g., 'security', 'performance', 'style')"}},"type":"object","required":["code"],"title":"AnalysisRequest","description":"Code analysis request model."},"AnalysisResponse":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Timestamp of the response"},"analysis":{"type":"string","title":"Analysis","description":"Analysis results"},"language":{"type":"string","title":"Language","description":"Programming language"},"processing_time":{"type":"number","title":"Processing Time","description":"Time taken to analyze the code"},"issues":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Issues","description":"List of identified issues"},"suggestions":{"items":{"type":"string"},"type":"array","title":"Suggestions","description":"Improvement suggestions"},"metrics":{"additionalProperties":true,"type":"object","title":"Metrics","description":"Code quality metrics"}},"type":"object","required":["analysis","language","processing_time"],"title":"AnalysisResponse","description":"Code analysis response model."},"ChatRequest":{"properties":{"agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent","description":"Name of the agent to use (defaults to 'default')"},"message":{"type":"string","title":"Message","description":"Message to send to the agent"},"context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Context","description":"Additional context for the message"},"stream":{"type":"boolean","title":"Stream","description":"Whether to stream the response","default":false}},"type":"object","required":["message"],"title":"ChatRequest","description":"Chat request model."},"ChatResponse":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Timestamp of the response"},"message":{"type":"string","title":"Message","description":"Agent's response message"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Additional metadata about the response"},"processing_time":{"type":"number","title":"Processing Time","description":"Time taken to process the request"},"agent":{"type":"string","title":"Agent","description":"Name of the agent that processed the request"},"tools_used":{"items":{"type":"string"},"type":"array","title":"Tools Used","description":"List of tools used to generate the response"}},"type":"object","required":["message","processing_time","agent"],"title":"ChatResponse","description":"Chat response model."},"CodeRequest":{"properties":{"agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent","description":"Name of the agent to use (defaults to 'default')"},"description":{"type":"string","title":"Description","description":"Description of the code to generate"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"style":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Style","description":"Code style preferences (e.g., 'functional', 'object-oriented')"},"include_tests":{"type":"boolean","title":"Include Tests","description":"Whether to include unit tests","default":false},"include_docs":{"type":"boolean","title":"Include Docs","description":"Whether to include documentation","default":true}},"type":"object","required":["description"],"title":"CodeRequest","description":"Code generation request model."},"CodeResponse":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Timestamp of the response"},"code":{"type":"string","title":"Code","description":"Generated code"},"language":{"type":"string","title":"Language","description":"Programming language"},"description":{"type":"string","title":"Description","description":"Description of the generated code"},"processing_time":{"type":"number","title":"Processing Time","description":"Time taken to generate the code"},"suggestions":{"items":{"type":"string"},"type":"array","title":"Suggestions","description":"Additional suggestions or improvements"}},"type":"object","required":["code","language","description","processing_time"],"title":"CodeResponse","description":"Code generation response model."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginRequest":{"properties":{"username":{"type":"string","title":"Username","description":"Username"},"password":{"type":"string","title":"Password","description":"Password"}},"type":"object","required":["username","password"],"title":"LoginRequest","description":"Login request model."},"LoginResponse":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Timestamp of the response"},"access_token":{"type":"string","title":"Access Token","description":"JWT access token"},"token_type":{"type":"string","title":"Token Type","description":"Token type","default":"bearer"},"user":{"$ref":"#/components/schemas/User","description":"User information"},"expires_in":{"type":"integer","title":"Expires In","description":"Token expiration time in seconds","default":3600}},"type":"object","required":["access_token","user"],"title":"LoginResponse","description":"Login response model."},"ModelInfo":{"properties":{"name":{"type":"string","title":"Name","description":"Model name"},"path":{"type":"string","title":"Path","description":"Hugging Face model path"},"category":{"type":"string","title":"Category","description":"Model category (code, chat, lightweight)"},"description":{"type":"string","title":"Description","description":"Model description"},"size":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Size","description":"Model size (e.g., '7B', '13B')"},"parameters":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Parameters","description":"Number of parameters"},"memory_required":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Memory Required","description":"Estimated memory requirement"},"is_loaded":{"type":"boolean","title":"Is Loaded","description":"Whether the model is currently loaded","default":false}},"type":"object","required":["name","path","category","description"],"title":"ModelInfo","description":"Model information model."},"SystemInfoResponse":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Timestamp of the response"},"content":{"type":"string","title":"Content","description":"System information content"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Additional system metadata"}},"type":"object","required":["content"],"title":"SystemInfoResponse","description":"System information response model."},"User":{"properties":{"id":{"type":"string","title":"Id"},"username":{"type":"string","title":"Username"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"is_active":{"type":"boolean","title":"Is Active","default":true},"created_at":{"type":"string","format":"date-time","title":"Created At"},"last_login":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login"},"roles":{"items":{"type":"string"},"type":"array","title":"Roles","description":"List of roles for RBAC (e.g., ['admin','user'])"}},"type":"object","required":["id","username","created_at"],"title":"User","description":"User model for authentication."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}